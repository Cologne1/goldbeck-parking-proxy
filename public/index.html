<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <title>Goldbeck Parking – Test UI</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root { --blue:#003399; --accent:#ff9900; --bg:#f6f7fb; --ink:#1f2430; --muted:#6b7280; --card:#fff; --line:#e5e7eb; }
    * { box-sizing: border-box; }
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin:0; background:var(--bg); color:var(--ink); }
    header { background:var(--blue); color:#fff; padding:14px 20px; }
    header h1 { margin:0; font-size:18px; font-weight:600; }
    main { padding: 16px; max-width: 1320px; margin: 0 auto; }

    .toolbar { display:grid; grid-template-columns: 2fr 1fr 1fr auto; gap:10px; align-items:end; margin-bottom:12px; }
    .group { display:flex; flex-direction:column; gap:6px; }
    label { font-size:12px; color:#e5e7eb; }
    .group label.dark { color:#374151; }
    input, select, button { padding:8px 10px; border:1px solid var(--line); border-radius:8px; font-size:14px; background:#fff; }
    button { background:var(--blue); color:#fff; border:none; cursor:pointer; }
    button:hover { background:#062a97; }
    .ghost { background:#fff; color:var(--ink); border:1px solid var(--line); }
    .ghost:hover { border-color:#cbd5e1; }

    /* Symmetrisches Layout: linke + rechte Spalte gleich breit */
    .layout { display:grid; grid-template-columns: 420px 1fr 420px; gap:14px; align-items:start; }

    .panel { background:var(--card); border:1px solid var(--line); border-radius:10px; padding:12px; }
    .panel h3 { margin:0 0 10px; font-size:15px; line-height:1.2; }
    .muted { color:var(--muted); font-size:12px; }

    .list { max-height:72vh; overflow:auto; border:1px solid var(--line); border-radius:8px; }
    .list table { width:100%; border-collapse: collapse; font-size:13px; }
    .list th, .list td { border-bottom:1px solid var(--line); padding:8px; text-align:left; vertical-align:top; }
    .list tr:hover { background:#fafafa; }
    .id-link { color:var(--blue); text-decoration:none; }
    .id-link:hover { text-decoration:underline; }

    .kv { display:grid; grid-template-columns: 160px 1fr; gap:6px 10px; font-size:14px; }
    .kv b { color:#111; }
    .tagrow { display:flex; gap:6px; flex-wrap:wrap; }
    .tag { background:#eef2ff; border:1px solid #dbeafe; border-radius:999px; padding:2px 8px; font-size:12px; }

    /* Olli-Präferenz: Break-Spaces */
    pre { white-space: break-spaces; background:#0b1020; color:#c4f0c4; padding:12px; border-radius:8px; font-size:12px; max-height:34vh; overflow:auto; }

    .subtabs { display:flex; gap:8px; margin-bottom:8px; }
    .subtabs button { padding:6px 8px; border-radius:6px; }
    .grid2 { display:grid; grid-template-columns: 1fr 1fr; gap:8px; }

    /* Kleiner Abstand über Tabellen-Titeln */
    .table-title { margin:8px 0 6px; font-size:13px; color:#111; }
    .filterbar { display:grid; grid-template-columns: 1fr auto; gap:10px; align-items:end; margin-bottom:10px; }
    .filters-grid { display:grid; grid-template-columns: 1fr 1fr; gap:14px; }
    #filtersPanel h4 { margin:0 0 6px; font-size:14px; }
    #filtersPanel label { font-size:13px; color:var(--ink); }
  </style>
</head>
<body>
<header><h1>Goldbeck Parking – Test UI</h1></header>
<main>
  <!-- NEU: Globale Filterleiste -->
  <div class="panel" id="filtersPanel">
    <div class="filterbar">
      <div class="group">
        <label class="dark" for="modeSelect">Ansicht</label>
        <select id="modeSelect">
          <option value="parkhaus">Parkhaus</option>
          <option value="eladen">Ladestation</option>
        </select>
      </div>
      <div class="group" style="align-self:end;">
        <button id="btnApplyFilters" class="ghost">Filter anwenden</button>
        <button id="btnResetFilters" class="ghost" style="margin-left:6px;">Zurücksetzen</button>
      </div>
    </div>

    <!-- Parkhaus-Filter -->
    <div id="pfContainer" class="filters-grid">
      <div>
        <h4>Filter Parkobjekte:</h4>
        <label><input type="checkbox" id="pf-height" /> Höhenbegrenzung</label><br/>
        <label><input type="checkbox" id="pf-surveillance" /> Überwacht</label><br/>
        <label><input type="checkbox" id="pf-roofed" /> Überdacht</label><br/>
        <label><input type="checkbox" id="pf-elevator" /> Aufzug</label><br/>
        <label><input type="checkbox" id="pf-accessible" /> Barrierefrei</label><br/>
        <label><input type="checkbox" id="pf-bike" /> Fahrradstellplatz</label><br/>
        <label><input type="checkbox" id="pf-family" /> Familienparkplatz</label><br/>
        <label><input type="checkbox" id="pf-women" /> Frauenparkplatz</label><br/>
        <label><input type="checkbox" id="pf-payment" /> Zahlungsmittel</label><br/>
        <label><input type="checkbox" id="pf-longterm" /> Dauerparken</label><br/>
        <label><input type="checkbox" id="pf-payperuse" /> Pay-per-Use</label><br/>
        <label><input type="checkbox" id="pf-reservation" /> Reservierung</label><br/>
        <label><input type="checkbox" id="pf-open" /> Jetzt geöffnet</label><br/>
        <label><input type="checkbox" id="pf-transit" /> ÖPNV fußläufig erreichbar</label><br/>
        <label><input type="checkbox" id="pf-hascharging" /> E-Laden</label>
      </div>

      <div>
        <h4>Bezahlmöglichkeiten:</h4>
        <label><input type="checkbox" id="pf-pay-cash" /> Bargeld</label><br/>
        <label><input type="checkbox" id="pf-pay-ec" /> EC-Karte</label><br/>
        <label><input type="checkbox" id="pf-pay-mastercard" /> Mastercard</label><br/>
        <label><input type="checkbox" id="pf-pay-visa" /> VISA</label><br/>
        <label><input type="checkbox" id="pf-pay-mobile" /> Mobile Ticket Payment</label><br/>
        <label><input type="checkbox" id="pf-pay-easypark" /> EasyPark</label><br/>
        <label><input type="checkbox" id="pf-pay-dkv" /> DKV</label><br/>
        <label><input type="checkbox" id="pf-pay-ppude" /> PayPerUse DE-weit</label>
      </div>
    </div>

    <!-- E-Laden-Filter -->
    <div id="efContainer" class="filters-grid" style="display:none;">
      <div>
        <h4>Filter E-Laden:</h4>
        <label><input type="checkbox" id="ef-height" /> Höhenbegrenzung</label><br/>
        <label><input type="checkbox" id="ef-surveillance" /> Überwacht</label><br/>
        <label><input type="checkbox" id="ef-roofed" /> Überdacht</label><br/>
        <label><input type="checkbox" id="ef-elevator" /> Aufzug</label><br/>
        <label><input type="checkbox" id="ef-accessible" /> Barrierefrei</label><br/>
        <label><input type="checkbox" id="ef-bike" /> Fahrradstellplatz</label><br/>
        <label><input type="checkbox" id="ef-family" /> Familienparkplatz</label><br/>
        <label><input type="checkbox" id="ef-women" /> Frauenparkplatz</label><br/>

      </div>

      <div>
        <h4>Bezahloptionen</h4>
        <label><input type="checkbox" id="csPayDirect"/> Direkt</label><br/>
        <label><input type="checkbox" id="csPayContract"/> Rechnung</label>

        <h4>Steckertyp</h4>
        <label><input type="checkbox" id="ef-conn-type2" /> Typ 2</label><br/>
        <label><input type="checkbox" id="ef-conn-ccs" /> CCS</label>

        <h4>Leistung</h4>
        <label><input type="checkbox" id="ef-pwr-50" /> 50+ kW</label><br/>
        <label><input type="checkbox" id="ef-pwr-100" /> 100+ kW</label><br/>
        <label><input type="checkbox" id="ef-pwr-150" /> 150+ kW</label>
      </div>
    </div>
  </div>
  <!-- Toolbar -->
  <div class="panel">
    <div class="toolbar">
      <div class="group">
        <label class="dark" for="filterText">Filter (Volltext)</label>
        <input id="filterText" placeholder="z. B. Stadt, Name, ID ..." />
      </div>
      <div class="group">
        <label class="dark" for="definitionId">Art</label>
        <select id="definitionId">
          <option value="">– alle –</option>
        </select>
      </div>
      <div class="group">
        <label class="dark">&nbsp;</label>
        <button id="btnLoadFacilities">Parkhäuser laden</button>
      </div>
      <div class="group" style="align-items:flex-end;">
        <span id="countBadge" class="muted">0 Treffer</span>
      </div>
    </div>
    <div class="muted">Tipp: In der Liste einen Eintrag anklicken → Details + Belegung (nur diese Standort-ID). Rechts separat: E-Ladestationen.</div>
  </div>

  <div class="layout">
    <!-- Linke Spalte: Liste -->
    <aside class="panel">
      <h3>Parkhäuser (Liste)</h3>
      <div class="list" id="facilitiesListBox">
        <table>
          <thead><tr><th>ID</th><th>Name</th><th class="muted">Definition</th></tr></thead>
          <tbody id="facilitiesTbody"></tbody>
        </table>
      </div>
    </aside>

    <!-- Mitte: Details zum Parkhaus -->
    <section class="panel">
      <h3>Details Parkhaus</h3>
      <div class="subtabs">
        <button id="tabOverview" class="ghost">Übersicht</button>
        <button id="tabRaw" class="ghost">Rohdaten</button>
      </div>

      <div id="viewOverview">
        <div class="kv">
          <b>Name</b><div id="facName">–</div>
          <b>Adresse</b><div id="facAddress">–</div>
          <b>Einfahrtshöhe</b><div id="facClearance">–</div>
          <b>Gesamtplätze</b><div id="facCapacity">–</div>
          <b>Belegung</b><div id="facStatus">–</div>
          <b>Tarife</b><div id="facRates">–</div>
          <b>Features</b><div id="facFeatures" class="tagrow"></div>
          <b>Zahlung</b><div id="facPayments" class="tagrow"></div>
        </div>
      </div>

      <div id="viewRaw" style="display:none;">
        <pre id="facRaw">{ }</pre>
      </div>
      <hr style="margin:16px 0;border:none;border-top:1px solid var(--line);" />
      <h3 style="margin:0 0 8px;">Details Ladestation</h3>
      <div class="kv" style="margin-bottom:8px;">
        <b>Name</b><div id="csName">–</div>
        <b>Adresse</b><div id="csAddress">–</div>
        <b>Zahlung</b><div id="csPay" class="tagrow"></div>
        <b>Zugang</b><div id="csAccess">–</div>
        <b>Steckertyp</b><div id="csPlugType">–</div>
        <b>Leistung</b><div id="csPower">–</div>
      </div>

      <h4 style="margin:0 0 6px;">Rohdaten</h4>
      <pre id="csRaw">{ }</pre>
    </section>

    <!-- Rechte Spalte: E-Ladestationen (symmetrisch zur linken Liste) -->
    <aside class="panel">
      <h3>E-Ladestationen (Liste + Details)</h3>

      <div class="grid2" style="margin-bottom:8px;">
        <div class="group">
          <label class="dark" for="chargeFilter">Filter</label>
          <input id="chargeFilter" placeholder="z. B. Stadt, Name ..." />
        </div>
        <div class="group">
          <label class="dark">&nbsp;</label>
          <button id="btnLoadCharging" class="ghost">Ladestationen laden</button>
        </div>
      </div>

      <div class="list" style="margin-bottom:12px;">
        <table>
          <thead><tr><th>ID</th><th>Name</th></tr></thead>
          <tbody id="chargeTbody"></tbody>
        </table>
      </div>


    </aside>
  </div>
</main>
<script src="./app.js"></script>
</body>
</html>